# ë§›ì§‘ ê²€ìƒ‰ ì„œë¹„ìŠ¤ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ

---

## í”„ë¡œì íŠ¸ ê°œìš”

**ëª©í‘œ**: ì˜¤í”ˆ APIë¥¼ ì´ìš©í•œ ë§›ì§‘ ê²€ìƒ‰ ì„œë¹„ìŠ¤ êµ¬í˜„
- í‚¤ì›Œë“œë¥¼ ì´ìš©í•´ ë§›ì§‘ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤
- ì¸ê¸° í‚¤ì›Œë“œ ì œê³µì„ í†µí•´ ì‚¬ëŒë“¤ì´ ê´€ì‹¬ ìˆëŠ” ë§›ì§‘ íŠ¸ë Œë“œ íŒŒì•…

---

## ìš”êµ¬ì‚¬í•­ ë¶„ì„

### ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­ (Functional Requirements)

#### 1. ë§›ì§‘ ê²€ìƒ‰ API
**ê¸°ëŠ¥**: í‚¤ì›Œë“œì™€ ì§€ì—­ì •ë³´ë¥¼ ì´ìš©í•œ ë§›ì§‘ ì •ë³´ ê²€ìƒ‰

- **ê²€ìƒ‰ ê¸°ëŠ¥**: í‚¤ì›Œë“œ ê¸°ë°˜ ë§›ì§‘ ê²€ìƒ‰
- **í•„í„°ë§**: ì§€ì—­ì •ë³´ë¥¼ ì´ìš©í•œ ê²€ìƒ‰ ê²°ê³¼ í•„í„°ë§
- **ì •ë ¬**: ì •í™•ë„ìˆœ, ë¦¬ë·° ê°œìˆ˜ìˆœ ì •ë ¬ ì§€ì›
- **í˜ì´ì§€ë„¤ì´ì…˜**: ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§• ì²˜ë¦¬
- **ì™¸ë¶€ API ì—°ë™**: ë„¤ì´ë²„ ì§€ì—­ê²€ìƒ‰ API(ê¸°ë³¸), ì¹´ì¹´ì˜¤ ë¡œì»¬ API(í™•ì¥)

#### 2. ì¸ê¸° í‚¤ì›Œë“œ API
**ê¸°ëŠ¥**: ì‚¬ìš©ìë“¤ì´ ë§ì´ ê²€ìƒ‰í•œ í‚¤ì›Œë“œ ì¡°íšŒ

- **ì¸ê¸° í‚¤ì›Œë“œ ì¡°íšŒ**: ìƒìœ„ 10ê°œ í‚¤ì›Œë“œ ì œê³µ
- **ê²€ìƒ‰ íšŸìˆ˜ ì œê³µ**: ê° í‚¤ì›Œë“œë³„ ê²€ìƒ‰ íšŸìˆ˜ í•¨ê»˜ ì‘ë‹µ
- **ê²€ìƒ‰ ê¸°ë¡ ìˆ˜ì§‘**: ì‚¬ìš©ì ê²€ìƒ‰ ì‹œ í‚¤ì›Œë“œ ì €ì¥ ë° ì§‘ê³„

#### 3. ì¹´í…Œê³ ë¦¬ ê¸°ëŠ¥ (ì‹¬í™”)
**ê¸°ëŠ¥**: ì§€ì—­ ê¸°ë°˜ ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° í‚¤ì›Œë“œ ì œê³µ

- **ì§€ì—­ë³„ ë¶„ë¥˜**: ê°•ë‚¨, í™ëŒ€, ì •ì, ì„±ìˆ˜ ë“± ì§€ì—­ ì¹´í…Œê³ ë¦¬
- **H2 ì½”ë“œ ìƒ‰ì¸**: H2 ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ìƒ‰ì¸ êµ¬í˜„

### ë¹„ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­ (Non-Functional Requirements)

#### ê°€ìš©ì„±(Availability)
- **ì™¸ë¶€ API ì¥ì•  ëŒ€ì‘**: ì™¸ë¶€ API ì¥ì•  ì‹œ ë‹¤ë¥¸ APIë¡œ Failover
- **ì„œë¹„ìŠ¤ ì—°ì†ì„±**: ì¼ë¶€ ê¸°ëŠ¥ ì¥ì•  ì‹œì—ë„ í•µì‹¬ ê¸°ëŠ¥ ìœ ì§€
- **Circuit Breaker**: ì¥ì•  ì „íŒŒ ë°©ì§€ ë° ìë™ ë³µêµ¬

#### ì„±ëŠ¥(Performance)
- **ê²€ìƒ‰ ì‘ë‹µ ì‹œê°„**: ì™¸ë¶€ API í˜¸ì¶œ í¬í•¨ 3ì´ˆ ì´ë‚´ ì‘ë‹µ
- **ì¸ê¸° í‚¤ì›Œë“œ ì¡°íšŒ**: ìºì‹œ í™œìš©ìœ¼ë¡œ 100ms ì´ë‚´ ì‘ë‹µ
- **ë¹„ë™ê¸° ì²˜ë¦¬**: ê²€ìƒ‰ ê¸°ë¡ ì €ì¥ì´ ê²€ìƒ‰ ì„±ëŠ¥ì— ì˜í–¥ ìµœì†Œí™”
- **ëŒ€ìš©ëŸ‰ ì²˜ë¦¬**: ì¼ì¼ ìˆ˜ì‹­ë§Œ ê±´ì˜ ê²€ìƒ‰ ê¸°ë¡ ì²˜ë¦¬ ê°€ëŠ¥

#### í™•ì¥ì„±(Scalability)
- **ìˆ˜í‰ í™•ì¥**: ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€ë¡œ ì²˜ë¦¬ëŸ‰ ì¦ëŒ€ ê°€ëŠ¥
- **ìƒˆë¡œìš´ ê²€ìƒ‰ ì†ŒìŠ¤**: í”ŒëŸ¬ê·¸ì¸ ë°©ì‹ìœ¼ë¡œ ê²€ìƒ‰ API ì¶”ê°€ ìš©ì´
- **ì§€ì—­ í™•ì¥**: ìƒˆë¡œìš´ ì§€ì—­ ì¹´í…Œê³ ë¦¬ ë™ì  ì¶”ê°€ ê°€ëŠ¥

#### ì‹ ë¢°ì„±(Reliability)
- **ë°ì´í„° ì •í™•ì„±**: í‚¤ì›Œë“œ ê²€ìƒ‰ ë¹ˆë„ ì§‘ê³„ì˜ ì •í™•ì„± ë³´ì¥
- **íŠ¸ëœì­ì…˜ ë³´ì¥**: ê²€ìƒ‰ ê¸°ë¡ ì €ì¥ì˜ ì›ìì„± ë³´ì¥
- **ì¼ê´€ì„±**: ì¸ê¸° í‚¤ì›Œë“œ ìºì‹œì™€ ì‹¤ì œ ë°ì´í„° ê°„ ì¼ê´€ì„± ìœ ì§€

#### ë³´ì•ˆ(Security)
- **API í‚¤ ë³´ì•ˆ**: ì™¸ë¶€ API í‚¤ì˜ ì•ˆì „í•œ ì €ì¥ ë° ê´€ë¦¬
- **Rate Limiting**: API í˜¸ì¶œ ë¹ˆë„ ì œí•œìœ¼ë¡œ ë‚¨ìš© ë°©ì§€
- **ì…ë ¥ ê²€ì¦**: SQL Injection, XSS ë“± ë³´ì•ˆ ì·¨ì•½ì  ë°©ì§€

#### ìš´ì˜ì„±(Operability)
- **ëª¨ë‹ˆí„°ë§**: ì™¸ë¶€ API ìƒíƒœ, ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­, ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­ ì¶”ì 
- **ë¡œê¹…**: ê²€ìƒ‰ íŒ¨í„´, ì—ëŸ¬ ìƒí™© ë“± ìš´ì˜ì— í•„ìš”í•œ ë¡œê·¸ ê¸°ë¡
- **ì•Œë¦¼**: ì™¸ë¶€ API ì¥ì• , ì‹œìŠ¤í…œ ì´ìƒ ìƒí™© ì‹œ ì•Œë¦¼

#### í’ˆì§ˆ(Quality)
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- **ì½”ë“œ í’ˆì§ˆ**: Clean Architectureì™€ SOLID ì›ì¹™ ì¤€ìˆ˜
- **TDD**: í…ŒìŠ¤íŠ¸ ìš°ì„  ê°œë°œ ë°©ì‹ ì ìš©

---

## ìƒì„¸ ê¸°ëŠ¥ ëª…ì„¸

### API ì—”ë“œí¬ì¸íŠ¸

#### 1. ë§›ì§‘ ê²€ìƒ‰ API
```http
GET /api/restaurants/search
```

**ìš”ì²­ íŒŒë¼ë¯¸í„°**
- `keyword` (í•„ìˆ˜): ê²€ìƒ‰ í‚¤ì›Œë“œ
- `location` (ì„ íƒ): ì§€ì—­ ì •ë³´
- `sort` (ì„ íƒ): ì •ë ¬ ë°©ì‹ (`accuracy`, `review_count`)
- `page` (ì„ íƒ): í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 1)
- `size` (ì„ íƒ): í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 10)

**ì‘ë‹µ ì˜ˆì‹œ**
```json
{
  "restaurants": [
    {
      "name": "ë§›ìˆëŠ” ê°ˆë¹„ì§‘",
      "category": "í•œì‹ > ìœ¡ë¥˜,ê³ ê¸°ìš”ë¦¬",
      "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ...",
      "phone": "02-123-4567",
      "rating": 4.5,
      "reviewCount": 128
    }
  ],
  "totalCount": 50,
  "currentPage": 1,
  "hasNext": true
}
```

#### 2. ì¸ê¸° í‚¤ì›Œë“œ API
```http
GET /api/keywords/popular
```

**ìš”ì²­ íŒŒë¼ë¯¸í„°**
- `category` (ì„ íƒ): ì§€ì—­ ì¹´í…Œê³ ë¦¬ (ê°•ë‚¨, í™ëŒ€ ë“±)

**ì‘ë‹µ ì˜ˆì‹œ**
```json
{
  "keywords": [
    {
      "keyword": "ê°ˆë¹„ì§‘",
      "count": 1234
    },
    {
      "keyword": "íŒŒìŠ¤íƒ€",
      "count": 987
    }
  ]
}
```
---

## ERD ë‹¤ì´ì–´ê·¸ë¨
ERD.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”. (ë°”ë¡œê°€ê¸°: [ERD.md](ERD.md))

### ğŸ”„ í•µì‹¬ ë°ì´í„° í”Œë¡œìš° ì„¤ëª…

### 1. ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤
**SEARCH_REQUEST** â†’ **SEARCH_RESULT** â†’ **RESTAURANT**  
(ê²€ìƒ‰ ìš”ì²­ â†’ ê²°ê³¼ â†’ ë§›ì§‘ ì •ë³´)

### 2. í‚¤ì›Œë“œ ë¶„ì„ í”„ë¡œì„¸ìŠ¤
**SEARCH_REQUEST** â†’ **SEARCH_RECORD** â†’ **KEYWORD**  
(ê²€ìƒ‰ ìš”ì²­ â†’ ê¸°ë¡ â†’ í‚¤ì›Œë“œ)

### 3. ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬
**SEARCH_REQUEST** â†’ **SEARCH_EVENT**  
(ê²€ìƒ‰ ìš”ì²­ â†’ ë¹„ë™ê¸° ì´ë²¤íŠ¸)

### 4. í‚¤ì›Œë“œ ì§‘ê³„ ê´€ê³„

- **KEYWORD** â†’ **KEYWORD_COUNT** (í‚¤ì›Œë“œë³„ ê²€ìƒ‰ íšŸìˆ˜ ì§‘ê³„)
- **KEYWORD** â†’ **POPULAR_KEYWORD** (ì¸ê¸° í‚¤ì›Œë“œ ìŠ¤ëƒ…ìƒ·)

### 5. ì§€ì—­ ê¸°ë°˜ ë¶„ë¥˜

**LOCATION_CATEGORY**ê°€ ë‹¤ìŒ í…Œì´ë¸”ë“¤ì„ ì§€ì—­ë³„ë¡œ ë¶„ë¥˜:
- **KEYWORD_COUNT**
- **POPULAR_KEYWORD**
- **SEARCH_RECORD**

### 6. ì™¸ë¶€ API ê´€ë¦¬

**EXTERNAL_API_CONFIG** â†’ **API_CALL_LOG**  
(API ì„¤ì • â†’ í˜¸ì¶œ ë¡œê·¸)



---

## ì™¸ë¶€ API ì—°ë™

### ë„¤ì´ë²„ ì§€ì—­ê²€ìƒ‰ API (ê¸°ë³¸)
- **URL**: `https://openapi.naver.com/v1/search/local.json`
- **ë¬¸ì„œ**: https://developers.naver.com/docs/serviceapi/search/local/local.md
- **ì¸ì¦**: Client ID/Secret
- **ì œí•œ**: ì¼ì¼ 25,000íšŒ

### ì¹´ì¹´ì˜¤ ë¡œì»¬ API (í™•ì¥)
- **URL**: `https://dapi.kakao.com/v2/local/search/keyword.json`
- **ë¬¸ì„œ**: https://developers.kakao.com/docs/latest/ko/local/dev-guide#search-by-keyword
- **ì¸ì¦**: REST API Key
- **ì œí•œ**: ì›”ê°„/ì¼ê°„ ì¿¼í„°

---

## í”„ë¡œì íŠ¸ êµ¬ì¡° (DDD ê¸°ë°˜)

```
com.restaurant.search
â”œâ”€â”€ restaurant
â”‚   â”œâ”€â”€ controller
â”‚   â”‚   â””â”€â”€ RestaurantController.java
â”‚   â”œâ”€â”€ service
â”‚   â”‚   â”œâ”€â”€ RestaurantSearchService.java
â”‚   â”‚   â””â”€â”€ RestaurantSearchServiceImpl.java
â”‚   â”œâ”€â”€ repository
â”‚   â”‚   â””â”€â”€ RestaurantRepository.java
â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”œâ”€â”€ Restaurant.java
â”‚   â”‚   â”œâ”€â”€ SearchRequest.java
â”‚   â”‚   â”œâ”€â”€ SearchResult.java
â”‚   â”‚   â””â”€â”€ SortType.java
â”‚   â””â”€â”€ dto
â”‚       â”œâ”€â”€ RestaurantSearchRequest.java
â”‚       â””â”€â”€ RestaurantSearchResponse.java
â”œâ”€â”€ keyword
â”‚   â”œâ”€â”€ controller
â”‚   â”‚   â””â”€â”€ KeywordController.java
â”‚   â”œâ”€â”€ service
â”‚   â”‚   â”œâ”€â”€ KeywordService.java
â”‚   â”‚   â”œâ”€â”€ KeywordServiceImpl.java
â”‚   â”‚   â””â”€â”€ KeywordCountService.java
â”‚   â”œâ”€â”€ repository
â”‚   â”‚   â”œâ”€â”€ KeywordRepository.java
â”‚   â”‚   â””â”€â”€ SearchRecordRepository.java
â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”œâ”€â”€ Keyword.java
â”‚   â”‚   â”œâ”€â”€ KeywordCount.java
â”‚   â”‚   â”œâ”€â”€ SearchRecord.java
â”‚   â”‚   â””â”€â”€ PopularKeyword.java
â”‚   â””â”€â”€ dto
â”‚       â””â”€â”€ PopularKeywordResponse.java
â”œâ”€â”€ external
â”‚   â”œâ”€â”€ client
â”‚   â”‚   â”œâ”€â”€ SearchApiClient.java
â”‚   â”‚   â”œâ”€â”€ NaverLocalApiClient.java
â”‚   â”‚   â””â”€â”€ KakaoLocalApiClient.java
â”‚   â”œâ”€â”€ config
â”‚   â”‚   â”œâ”€â”€ NaverApiConfig.java
â”‚   â”‚   â””â”€â”€ KakaoApiConfig.java
â”‚   â””â”€â”€ dto
â”‚       â”œâ”€â”€ naver
â”‚       â”‚   â”œâ”€â”€ NaverSearchRequest.java
â”‚       â”‚   â”œâ”€â”€ NaverSearchResponse.java
â”‚       â”‚   â””â”€â”€ NaverSearchItem.java
â”‚       â””â”€â”€ kakao
â”‚           â”œâ”€â”€ KakaoSearchRequest.java
â”‚           â”œâ”€â”€ KakaoSearchResponse.java
â”‚           â””â”€â”€ KakaoDocument.java
â”œâ”€â”€ search
â”‚   â”œâ”€â”€ service
â”‚   â”‚   â”œâ”€â”€ SearchEventService.java
â”‚   â”‚   â””â”€â”€ SearchEventServiceImpl.java
â”‚   â”œâ”€â”€ event
â”‚   â”‚   â”œâ”€â”€ SearchEvent.java
â”‚   â”‚   â””â”€â”€ SearchEventHandler.java
â”‚   â””â”€â”€ strategy
â”‚       â”œâ”€â”€ SearchStrategy.java
â”‚       â”œâ”€â”€ FailoverSearchStrategy.java
â”‚       â””â”€â”€ AggregatedSearchStrategy.java
â””â”€â”€ common
    â”œâ”€â”€ config
    â”‚   â”œâ”€â”€ AsyncConfig.java
    â”‚   â”œâ”€â”€ CacheConfig.java
    â”‚   â”œâ”€â”€ CircuitBreakerConfig.java
    â”‚   â””â”€â”€ WebConfig.java
    â”œâ”€â”€ exception
    â”‚   â”œâ”€â”€ GlobalExceptionHandler.java
    â”‚   â”œâ”€â”€ ExternalApiException.java
    â”‚   â”œâ”€â”€ SearchException.java
    â”‚   â””â”€â”€ KeywordException.java
    â”œâ”€â”€ util
    â”‚   â”œâ”€â”€ CoordinateConverter.java
    â”‚   â””â”€â”€ HtmlTagRemover.java
    â””â”€â”€ constant
        â””â”€â”€ ApiConstants.java
```

### ì£¼ìš” ë„ë©”ì¸ êµ¬ì¡° ì„¤ëª…

#### Restaurant ë„ë©”ì¸
- **í•µì‹¬ ì±…ì„**: ë§›ì§‘ ì •ë³´ ê²€ìƒ‰ ë° ê´€ë¦¬
- **ì£¼ìš” ì—”í‹°í‹°**: Restaurant, SearchRequest, SearchResult
- **ì™¸ë¶€ ì˜ì¡´ì„±**: ë„¤ì´ë²„/ì¹´ì¹´ì˜¤ API í´ë¼ì´ì–¸íŠ¸

#### Keyword ë„ë©”ì¸
- **í•µì‹¬ ì±…ì„**: ê²€ìƒ‰ í‚¤ì›Œë“œ ì¶”ì  ë° ì¸ê¸° í‚¤ì›Œë“œ ì œê³µ
- **ì£¼ìš” ì—”í‹°í‹°**: Keyword, KeywordCount, SearchRecord
- **ì´ë²¤íŠ¸ ì²˜ë¦¬**: ê²€ìƒ‰ ì´ë²¤íŠ¸ ìˆ˜ì‹ í•˜ì—¬ í‚¤ì›Œë“œ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸

#### External íŒ¨í‚¤ì§€
- **í•µì‹¬ ì±…ì„**: ì™¸ë¶€ API ì—°ë™ ë° ë°ì´í„° ë³€í™˜
- **ì„¤ê³„ ì›ì¹™**: Strategy íŒ¨í„´ìœ¼ë¡œ ë‹¤ì¤‘ API ì§€ì›
- **ì¥ì•  ì²˜ë¦¬**: Circuit Breaker ë° Failover êµ¬í˜„

#### Search íŒ¨í‚¤ì§€
- **í•µì‹¬ ì±…ì„**: ê²€ìƒ‰ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë° ê²€ìƒ‰ ì „ëµ ê´€ë¦¬
- **ë¹„ë™ê¸° ì²˜ë¦¬**: ê²€ìƒ‰ ê¸°ë¡ ì €ì¥ ë° í‚¤ì›Œë“œ ì§‘ê³„
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ê²€ìƒ‰ ì „ëµ ì¶”ê°€ ìš©ì´

## ê°œë°œ ìš°ì„ ìˆœìœ„

### Phase 1 (MVP)
1. Restaurant ë„ë©”ì¸ - ê¸°ë³¸ ê²€ìƒ‰ ê¸°ëŠ¥
2. External íŒ¨í‚¤ì§€ - ë„¤ì´ë²„ API í´ë¼ì´ì–¸íŠ¸
3. Keyword ë„ë©”ì¸ - ê²€ìƒ‰ ê¸°ë¡ ì €ì¥ ë° ì¸ê¸° í‚¤ì›Œë“œ
4. Search íŒ¨í‚¤ì§€ - ê²€ìƒ‰ ì´ë²¤íŠ¸ ì²˜ë¦¬
5. ì¹´í…Œê³ ë¦¬ ê¸°ëŠ¥ - ì§€ì—­ ì •ë³´ ê¸°ë°˜ í•„í„°ë§

### Phase 2 (í™•ì¥)
1. External íŒ¨í‚¤ì§€ - ì¹´ì¹´ì˜¤ API ì¶”ê°€ ë° Failover
2. Search íŒ¨í‚¤ì§€ - ë‹¤ì¤‘ ê²€ìƒ‰ ì „ëµ êµ¬í˜„
3. Common íŒ¨í‚¤ì§€ - Circuit Breaker ë° ìºì‹±

### Phase 3 (ì‹¬í™”)
1. Keyword ë„ë©”ì¸ - ì§€ì—­ ê¸°ë°˜ ì¹´í…Œê³ ë¦¬ ê¸°ëŠ¥
2. Restaurant ë„ë©”ì¸ - H2 ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ìƒ‰ì¸
3. ì„±ëŠ¥ ìµœì í™” ë° ëª¨ë‹ˆí„°ë§

---

## ë°°í¬ (AWS)
(ë°”ë¡œê°€ê¸°: [aws.png](aws.png))
<img src="aws.png"/>